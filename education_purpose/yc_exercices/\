#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
int main(void)
{
	int i = 0;
	char *string;
	char **argv;
	char *token;
	pid_t chproc;
	size_t buffer_size = 64;
	size_t buffer;
	
	printf("#cisfun$ ");
	while ((buffer = getline(&string, &buffer_size, stdin) != -1))
	{
		token = malloc(sizeof(char) * strlen(string));
		if (token == NULL)
			return (-1);
		token = strtok(string, " \n");
		while (token != NULL)
		{
			argv[i] = malloc(sizeof(char) * strlen(token));
			if (argv[i] == NULL)
				return (-1);
			argv[i] = strdup(token);
			token = strtok(NULL, " \n");
			i++;
		}
		argv[i] = NULL;
		chproc = fork();
		if (chproc == -1)
		{
			perror("failed");
			exit(-1);
		}
		if (chproc == 0)
		{
			execve(argv[0], argv, NULL);
		}
		wait(0);
		printf("#cisfun$ ");
		free(string);
	}
	exit(1);
}
